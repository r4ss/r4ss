<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Iteratively run Stock Synthesis with jittered starting values — jitter • r4ss</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Iteratively run Stock Synthesis with jittered starting values — jitter"><meta name="description" content="Iteratively run a Stock Synthesis model with different jittered starting
parameter values based on the jitter fraction. Output files are renamed
in the format Report1.sso, Report2.sso, etc."><meta property="og:description" content="Iteratively run a Stock Synthesis model with different jittered starting
parameter values based on the jitter fraction. Output files are renamed
in the format Report1.sso, Report2.sso, etc."><meta property="og:image" content="https://r4ss.github.io/r4ss/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r4ss</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.51.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-plots.html">Example r4ss plots</a></li>
    <li><a class="dropdown-item" href="../articles/r4ss-intro-vignette.html">Introduction to r4ss</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r4ss/r4ss/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Iteratively run Stock Synthesis with jittered starting values</h1>
      <small class="dont-index">Source: <a href="https://github.com/r4ss/r4ss/blob/v1.51.0/R/jitter.R" class="external-link"><code>R/jitter.R</code></a></small>
      <div class="d-none name"><code>jitter.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Iteratively run a Stock Synthesis model with different jittered starting
parameter values based on the jitter fraction. Output files are renamed
in the format Report1.sso, Report2.sso, etc.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">jitter</span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mydir <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  Intern <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">Njitter</span>,</span>
<span>  printlikes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  jitter_fraction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  init_values_src <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exe <span class="op">=</span> <span class="st">"ss3"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extras <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>Directory where model files are located.</p></dd>


<dt id="arg-mydir">mydir<a class="anchor" aria-label="anchor" href="#arg-mydir"></a></dt>
<dd><p>Deprecated. Use <code>dir</code> instead.</p></dd>


<dt id="arg-intern">Intern<a class="anchor" aria-label="anchor" href="#arg-intern"></a></dt>
<dd><p>Deprecated. Use <code>show_in_console</code> instead.</p></dd>


<dt id="arg-njitter">Njitter<a class="anchor" aria-label="anchor" href="#arg-njitter"></a></dt>
<dd><p>Number of jitters, or a vector of jitter iterations.
If <code>length(Njitter) &gt; 1</code> only the iterations specified will be run,
else <code>1:Njitter</code> will be executed.</p></dd>


<dt id="arg-printlikes">printlikes<a class="anchor" aria-label="anchor" href="#arg-printlikes"></a></dt>
<dd><p>A logical value specifying if the likelihood values should
be printed to the console.</p></dd>


<dt id="arg-jitter-fraction">jitter_fraction<a class="anchor" aria-label="anchor" href="#arg-jitter-fraction"></a></dt>
<dd><p>The value, typically 0.1, used to define a uniform
distribution in cumulative normal space to generate new initial parameter values.
The default of <code>NULL</code> forces the user to specify the jitter_fraction
in the starter file, and this value must be greater than zero and
will not be overwritten.</p></dd>


<dt id="arg-init-values-src">init_values_src<a class="anchor" aria-label="anchor" href="#arg-init-values-src"></a></dt>
<dd><p>Either zero or one, specifying if the initial values to
jitter should be read from the control file or from the par file, respectively.
The default is <code>NULL</code>, which will leave the starter file unchanged.</p></dd>


<dt id="arg-exe">exe<a class="anchor" aria-label="anchor" href="#arg-exe"></a></dt>
<dd><p>Executable name. Can be just the name of the executable
file if it is in the specified directory or in the user's PATH. Can
also include the absolute path or a path relative to the specified
directory. Needs to be a single character string, not a vector.
On Windows, <code>exe</code> can optionally have the <code>.exe</code> extension appended;
on Unix-based systems (i.e., Mac and Linux), no extension should be
included.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical value specifying if output should be printed
to the screen.</p></dd>


<dt id="arg-extras">extras<a class="anchor" aria-label="anchor" href="#arg-extras"></a></dt>
<dd><p>Additional ADMB command line arguments passed
to the executable, such as "-nohess"</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="run.html">run()</a></code>, such as
<code>show_in_console</code>, and <code>skipfinished</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of likelihoods for each jitter iteration.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function will loop through models using the default strategy set by the
<code>future</code> package in the current working environment. In general, this means models
will run sequentially. To run multiple models simultaneously using parallel
computing, see <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code></p>
<p>Note that random number generation occurs outside of R directly in stock synthesis.
When running jitters in parallel (i.e. <code>future</code> strategy is not <code>sequential</code>), no formal
steps are taken to ensure independence of random numbers generated across
cores. However, when running in parallel, there is a pause of i seconds before the
ith jitter starts. The stock synthesis random number seed is based on the
system time down to the second, so this is intended to produce random numbers
from different seeds for each jitter. Random numbers may still not technically
be considered statistically independent. If jitter results are only used as a
general heuristic for model convergence, this mild lack of independence should
not matter much.</p>
<p>When running models in parallel, the transfer of large files leads to expensive
overheads and parallel processing may not be faster. Covariance files are
especially expensive to transfer, so the option <code>extras = '-nohess'</code> is
recommended when using parallel processing.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other run functions:
<code><a href="copy_SS_inputs.html">copy_SS_inputs</a>()</code>,
<code><a href="populate_multiple_folders.html">populate_multiple_folders</a>()</code>,
<code><a href="profile.html">profile</a>()</code>,
<code><a href="retro.html">retro</a>()</code>,
<code><a href="run.html">run</a>()</code>,
<code><a href="tune_comps.html">tune_comps</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>James T. Thorson, Kelli F. Johnson, Ian G. Taylor,
Kathryn L. Doering, Kiva L. Oken, Elizabeth F. Perl</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">#### Run jitter from par file with arbitrary, but common, choice of 0.1</span></span></span>
<span class="r-in"><span><span class="va">modeldir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"r4ss"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">numjitter</span> <span class="op">&lt;-</span> <span class="fl">25</span></span></span>
<span class="r-in"><span><span class="va">jit.likes</span> <span class="op">&lt;-</span> <span class="fu">jitter</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">modeldir</span>, Njitter <span class="op">=</span> <span class="va">numjitter</span>,</span></span>
<span class="r-in"><span>  jitter_fraction <span class="op">=</span> <span class="fl">0.1</span>, init_values_src <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Run same jitter in parallel</span></span></span>
<span class="r-in"><span><span class="va">ncores</span> <span class="op">&lt;-</span> <span class="fu">parallelly</span><span class="fu">::</span><span class="fu"><a href="https://parallelly.futureverse.org/reference/availableCores.html" class="external-link">availableCores</a></span><span class="op">(</span>omit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span>, workers <span class="op">=</span> <span class="va">ncores</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">jit.likes</span> <span class="op">&lt;-</span> <span class="fu">jitter</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">modeldir</span>, Njitter <span class="op">=</span> <span class="va">numjitter</span>,</span></span>
<span class="r-in"><span>  jitter_fraction <span class="op">=</span> <span class="fl">0.1</span>, init_values_src <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Read in results using other r4ss functions</span></span></span>
<span class="r-in"><span><span class="co"># (note that un-jittered model can be read using keyvec=0:numjitter)</span></span></span>
<span class="r-in"><span><span class="va">profilemodels</span> <span class="op">&lt;-</span> <span class="fu"><a href="SSgetoutput.html">SSgetoutput</a></span><span class="op">(</span>dirvec <span class="op">=</span> <span class="va">modeldir</span>, keyvec <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">numjitter</span>, getcovar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># summarize output</span></span></span>
<span class="r-in"><span><span class="va">profilesummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="SSsummarize.html">SSsummarize</a></span><span class="op">(</span><span class="va">profilemodels</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Likelihoods</span></span></span>
<span class="r-in"><span><span class="va">profilesummary</span><span class="op">[[</span><span class="st">"likelihoods"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Parameters</span></span></span>
<span class="r-in"><span><span class="va">profilesummary</span><span class="op">[[</span><span class="st">"pars"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ian G. Taylor, Ian J. Stewart, Allan C. Hicks, Tommy M. Garrison, Andre E. Punt, R.I.C. Chris Francis, John R. Wallace, Chantel R. Wetzel, James T. Thorson, Yukio Takeuchi, Kotaro Ono, Cole C. Monnahan, Christine C. Stawitz, Z. Teresa A’mar, Athol R. Whitten, Kelli F. Johnson, Robbie L. Emmet, Sean C. Anderson, Gwladys I. Lambert, Megan M. Stachura, Andrew B. Cooper, Andi Stephens, Neil L. Klaer, Carey R. McGilliard, Iago Mosqueira, Watal M. Iwasaki, Kathryn L. Doering, Andrea M. Havron, Nathan R. Vaughan, LaTreese S. Denson, Ashleigh J. Novak, Henning Winker, Lee Qi, Megumi Oshima, Eric Fletcher, Elizabeth F. Gugliotti, Kiva L. Oken.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


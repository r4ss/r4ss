<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply Francis composition weighting method TA1.8 for conditional age-at-length fits — SSMethod.Cond.TA1.8 • r4ss</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply Francis composition weighting method TA1.8 for conditional age-at-length fits — SSMethod.Cond.TA1.8"><meta name="description" content="Uses an extension of method TA1.8 (described in Appendix A of Francis, 2011)
to do stage-2 weighting of conditional age at length composition data from a
Stock Synthesis model."><meta property="og:description" content="Uses an extension of method TA1.8 (described in Appendix A of Francis, 2011)
to do stage-2 weighting of conditional age at length composition data from a
Stock Synthesis model."><meta property="og:image" content="https://r4ss.github.io/r4ss/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r4ss</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.50.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-plots.html">Example r4ss plots</a></li>
    <li><a class="dropdown-item" href="../articles/r4ss-intro-vignette.html">Introduction to r4ss</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r4ss/r4ss/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Apply Francis composition weighting method TA1.8 for conditional age-at-length fits</h1>
      <small class="dont-index">Source: <a href="https://github.com/r4ss/r4ss/blob/main/R/SSMethod.Cond.TA1.8.R" class="external-link"><code>R/SSMethod.Cond.TA1.8.R</code></a></small>
      <div class="d-none name"><code>SSMethod.Cond.TA1.8.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uses an extension of method TA1.8 (described in Appendix A of Francis, 2011)
to do stage-2 weighting of conditional age at length composition data from a
Stock Synthesis model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SSMethod.Cond.TA1.8</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">fleet</span>,</span>
<span>  part <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  seas <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plotit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  printit <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  datonly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plotadj <span class="op">=</span> <span class="op">!</span><span class="va">datonly</span>,</span>
<span>  maxpanel <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  FullDiagOut <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ShowVersionB <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fleetnames <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>Stock Synthesis output as read by r4SS function SS_output</p></dd>


<dt id="arg-fleet">fleet<a class="anchor" aria-label="anchor" href="#arg-fleet"></a></dt>
<dd><p>vector of one or more fleet numbers whose data are to
be analysed simultaneously (the output N multiplier applies
to all fleets combined)</p></dd>


<dt id="arg-part">part<a class="anchor" aria-label="anchor" href="#arg-part"></a></dt>
<dd><p>vector of one or more partition values; analysis is restricted
to composition data with one of these partition values.
Default is to include all partition values (0, 1, 2).</p></dd>


<dt id="arg-seas">seas<a class="anchor" aria-label="anchor" href="#arg-seas"></a></dt>
<dd><p>string indicating how to treat data from multiple seasons
'comb' - combine seasonal data for each year and plot against Yr
'sep' - treat seasons separately, plotting against Yr.S
If is.null(seas) it is assumed that there is only one season in
the selected data (a warning is output if this is not true) and
option 'comb' is used.</p></dd>


<dt id="arg-plotit">plotit<a class="anchor" aria-label="anchor" href="#arg-plotit"></a></dt>
<dd><p>if TRUE, make an illustrative plot like one or more
panels of Fig. 4 in Francis (2011).</p></dd>


<dt id="arg-printit">printit<a class="anchor" aria-label="anchor" href="#arg-printit"></a></dt>
<dd><p>if TRUE, print results to R console.</p></dd>


<dt id="arg-datonly">datonly<a class="anchor" aria-label="anchor" href="#arg-datonly"></a></dt>
<dd><p>if TRUE, don't show the model expectations</p></dd>


<dt id="arg-plotadj">plotadj<a class="anchor" aria-label="anchor" href="#arg-plotadj"></a></dt>
<dd><p>if TRUE, plot the confidence intervals associated with
the adjusted sample sizes (TRUE by default unless datonly = TRUE)</p></dd>


<dt id="arg-maxpanel">maxpanel<a class="anchor" aria-label="anchor" href="#arg-maxpanel"></a></dt>
<dd><p>maximum number of panels within a plot</p></dd>


<dt id="arg-fulldiagout">FullDiagOut<a class="anchor" aria-label="anchor" href="#arg-fulldiagout"></a></dt>
<dd><p>Print full diagnostics?</p></dd>


<dt id="arg-showversionb">ShowVersionB<a class="anchor" aria-label="anchor" href="#arg-showversionb"></a></dt>
<dd><p>Report the Version B value in addition to the default?</p></dd>


<dt id="arg-fleetnames">fleetnames<a class="anchor" aria-label="anchor" href="#arg-fleetnames"></a></dt>
<dd><p>Optional replacement for fleetnames used in data file.</p></dd>


<dt id="arg-add">add<a class="anchor" aria-label="anchor" href="#arg-add"></a></dt>
<dd><p>add to existing plot</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function outputs a multiplier, <em>w</em>,
(with bootstrap 95% confidence intervals) so that
<em>N2i</em> = <em>w</em> x <em>N1i</em>,
where <em>N1i</em> and <em>N2i</em> are the stage-1 and stage-2 multinomial
sample sizes for the <em>i</em>th composition. Optionally makes a plot
of observed and expected mean ages, with two alternative
sets of confidence limits - based on <em>N1i</em> (thin lines) and <em>N2i</em>
(thick lines) - for the observed values.</p>
<p>This function formerly reported two versions of w differ according to whether
the calculated mean ages are
indexed by year (version A) or by year and length bin (version B).
However, research by Punt (2017) found Version A to perform better and
version B is no longer recommended and is only reported if requested by the user.</p>
<p>CAUTIONARY/EXPLANATORY NOTE. The large number of options available in SS makes it
very difficult to be sure that what this function does is appropriate for all
combinations of options. The following notes (for version A) might help anyone
wanting to check or correct the code.</p><ol><li><p>The code first removes unneeded rows
from database condbase.</p></li>
<li><p>The remaining rows of the database are grouped
(indexed by vector indx) and relevant statistics (e.g., observed and expected
mean age), and ancillary data, are calculated for each group (these are stored
in pldat - one row per group).</p></li>
<li><p>If the data are to be plotted they are further
grouped by fleet, with one panel of the plot per fleet.</p></li>
<li><p>A single multiplier, <em>w</em>, is calculated to apply to all the
selected data.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Francis, R.I.C.C. (2011). Data weighting in statistical
fisheries stock assessment models. Can. J. Fish. Aquat. Sci. 68: 1124-1138.
https://doi.org/10.1139/f2011-025.</p>
<p>Punt, A.E. (2017). Some insights into data weighting in integrated stock assessments.
Fish. Res. 192:52-65. https://doi.org/10.1016/j.fishres.2015.12.006.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other tuning functions:
<code><a href="SSMethod.TA1.8.html">SSMethod.TA1.8</a>()</code>,
<code><a href="tune_comps.html">tune_comps</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>R.I.C Chris Francis, Andre E. Punt, Ian G. Taylor</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ian G. Taylor, Ian J. Stewart, Allan C. Hicks, Tommy M. Garrison, Andre E. Punt, R.I.C. Chris Francis, John R. Wallace, Chantel R. Wetzel, James T. Thorson, Yukio Takeuchi, Kotaro Ono, Cole C. Monnahan, Christine C. Stawitz, Z. Teresa A’mar, Athol R. Whitten, Kelli F. Johnson, Robbie L. Emmet, Sean C. Anderson, Gwladys I. Lambert, Megan M. Stachura, Andrew B. Cooper, Andi Stephens, Neil L. Klaer, Carey R. McGilliard, Iago Mosqueira, Watal M. Iwasaki, Kathryn L. Doering, Andrea M. Havron, Nathan R. Vaughan, LaTreese S. Denson, Ashleigh J. Novak, Henning Winker, Lee Qi, Megumi Oshima, Eric Fletcher, Elizabeth F. Gugliotti, Kiva L. Oken.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


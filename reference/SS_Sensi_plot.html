<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create relative sensitivity plots as described in Cope and Gertseva (2020) — SS_Sensi_plot • r4ss</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create relative sensitivity plots as described in Cope and Gertseva (2020) — SS_Sensi_plot"><meta name="description" content="Uses output from SSsummarize() to make a figure showing
sensitivity of various quantities of interest."><meta property="og:description" content="Uses output from SSsummarize() to make a figure showing
sensitivity of various quantities of interest."><meta property="og:image" content="https://r4ss.github.io/r4ss/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r4ss</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.52.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-plots.html">Example r4ss plots</a></li>
    <li><a class="dropdown-item" href="../articles/r4ss-intro-vignette.html">Introduction to r4ss</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r4ss/r4ss/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Create relative sensitivity plots as described in Cope and Gertseva (2020)</h1>
      <small class="dont-index">Source: <a href="https://github.com/r4ss/r4ss/blob/main/R/SS_Sensi_plot.R" class="external-link"><code>R/SS_Sensi_plot.R</code></a></small>
      <div class="d-none name"><code>SS_Sensi_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uses output from <code><a href="SSsummarize.html">SSsummarize()</a></code> to make a figure showing
sensitivity of various quantities of interest.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SS_Sensi_plot</span><span class="op">(</span></span>
<span>  <span class="va">model.summaries</span>,</span>
<span>  dir <span class="op">=</span> <span class="st">""</span>,</span>
<span>  <span class="va">current.year</span>,</span>
<span>  <span class="va">mod.names</span>,</span>
<span>  Sensi.RE.out <span class="op">=</span> <span class="st">"Sensi_RE_out.DMP"</span>,</span>
<span>  CI <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  TRP.in <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  LRP.in <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  sensi_xlab <span class="op">=</span> <span class="st">"Sensitivity scenarios"</span>,</span>
<span>  ylims.in <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  plot.figs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  sensi.type.breaks <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  anno.x <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  anno.y <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  anno.lab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  spawn.lab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  yield.lab <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  F.lab <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model-summaries">model.summaries<a class="anchor" aria-label="anchor" href="#arg-model-summaries"></a></dt>
<dd><p>Output from <code><a href="SSsummarize.html">SSsummarize()</a></code>
summarizing results of models to be included</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>A file path to the directory of interest.
The default value is <code>dir = NULL</code>, which leads to using
the current working directory.</p></dd>


<dt id="arg-current-year">current.year<a class="anchor" aria-label="anchor" href="#arg-current-year"></a></dt>
<dd><p>Year to report output</p></dd>


<dt id="arg-mod-names">mod.names<a class="anchor" aria-label="anchor" href="#arg-mod-names"></a></dt>
<dd><p>List the names of the sensitivity runs</p></dd>


<dt id="arg-sensi-re-out">Sensi.RE.out<a class="anchor" aria-label="anchor" href="#arg-sensi-re-out"></a></dt>
<dd><p>Saved file of relative changes</p></dd>


<dt id="arg-ci">CI<a class="anchor" aria-label="anchor" href="#arg-ci"></a></dt>
<dd><p>Confidence interval box based on the reference model</p></dd>


<dt id="arg-trp-in">TRP.in<a class="anchor" aria-label="anchor" href="#arg-trp-in"></a></dt>
<dd><p>Target relative abundance value</p></dd>


<dt id="arg-lrp-in">LRP.in<a class="anchor" aria-label="anchor" href="#arg-lrp-in"></a></dt>
<dd><p>Limit relative abundance value</p></dd>


<dt id="arg-sensi-xlab">sensi_xlab<a class="anchor" aria-label="anchor" href="#arg-sensi-xlab"></a></dt>
<dd><p>X-axis label</p></dd>


<dt id="arg-ylims-in">ylims.in<a class="anchor" aria-label="anchor" href="#arg-ylims-in"></a></dt>
<dd><p>Y-axis label</p></dd>


<dt id="arg-plot-figs">plot.figs<a class="anchor" aria-label="anchor" href="#arg-plot-figs"></a></dt>
<dd><p>Which plots to make/save?</p></dd>


<dt id="arg-sensi-type-breaks">sensi.type.breaks<a class="anchor" aria-label="anchor" href="#arg-sensi-type-breaks"></a></dt>
<dd><p>vertical breaks that can separate out types
of sensitivities</p></dd>


<dt id="arg-anno-x">anno.x<a class="anchor" aria-label="anchor" href="#arg-anno-x"></a></dt>
<dd><p>Horizontal positioning of the sensitivity types labels</p></dd>


<dt id="arg-anno-y">anno.y<a class="anchor" aria-label="anchor" href="#arg-anno-y"></a></dt>
<dd><p>Vertical positioning of the sensitivity types labels</p></dd>


<dt id="arg-anno-lab">anno.lab<a class="anchor" aria-label="anchor" href="#arg-anno-lab"></a></dt>
<dd><p>Sensitivity types labels</p></dd>


<dt id="arg-spawn-lab">spawn.lab<a class="anchor" aria-label="anchor" href="#arg-spawn-lab"></a></dt>
<dd><p>Label for spawning output or spawning biomass. By default
it will be set to "SO" if any model has spawning output in numbers and "SB"
if all models have spawning output in biomass. Subscripts will be added
for 0 or current year.</p></dd>


<dt id="arg-yield-lab">yield.lab<a class="anchor" aria-label="anchor" href="#arg-yield-lab"></a></dt>
<dd><p>Label for yield reference point.
By default it will be set to something like "Yield(SPR=0.3)" where the SPR
value is the SPR target. If the models have different SPR targets, it will
be set to "Yield(tgt SPR)".</p></dd>


<dt id="arg-f-lab">F.lab<a class="anchor" aria-label="anchor" href="#arg-f-lab"></a></dt>
<dd><p>Label for F reference point.
By default it will be set to something like "F(SPR=0.3)" where the SPR
value is the SPR target. If the models have different SPR targets, it will
be set to "F(tgt SPR)".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cope, J. and Gertseva, V. 2020. A new way to visualize
and report structural and data uncertainty in stock assessments.
Can. J. Fish. Aquat. Sci. 77:1275-1280.
https://doi.org/10.1139/cjfas-2020-0082</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="SSsummarize.html">SSsummarize()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jason Cope</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set directory and extract ouput from models</span></span></span>
<span class="r-in"><span><span class="co"># Model 1 needs to be the Reference model, with sensitivity runs following</span></span></span>
<span class="r-in"><span><span class="co"># from run 2 on.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: models are available in Jason Cope's github repository:</span></span></span>
<span class="r-in"><span><span class="co"># https://github.com/shcaba/Stock-Assessment-Sensitivity-Plots/</span></span></span>
<span class="r-in"><span><span class="va">dir</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="st">"C:/Users/.../GitHub/Stock-Assessment-Sensitivity-Plots/Sensitivity_runs/"</span></span></span>
<span class="r-in"><span><span class="va">models.dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Cab_SCS_MS_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">19</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">zz</span> <span class="op">&lt;-</span> <span class="fu"><a href="SSgetoutput.html">SSgetoutput</a></span><span class="op">(</span>dirvec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">models.dirs</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the summarize function in r4ss to get model summaries</span></span></span>
<span class="r-in"><span><span class="va">model.summaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="SSsummarize.html">SSsummarize</a></span><span class="op">(</span><span class="va">zz</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define the names of each model. This will be used to label runs in the</span></span></span>
<span class="r-in"><span><span class="co"># table and in the figures.</span></span></span>
<span class="r-in"><span><span class="va">mod.names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Reference"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"M: Fix to 2009"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"M: Fix to prior"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"M: Fix to Hamel"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"M: Fix to VBGF"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"M: Fix to OR"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"VBGF 2009"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"VBGF Grebel"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"OR maturity"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Est. h"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"All rec devs"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"No rec devs"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"High bias adj."</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Harmonic mean"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Dirichlet"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Wts = 1"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"No blocks"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"First blocks in 2000"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Alt rec catches"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run the sensitivity plot function</span></span></span>
<span class="r-in"><span><span class="fu">SS_Sensi_plot</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model.summaries <span class="op">=</span> <span class="va">model.summaries</span>,</span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">dir</span>,</span></span>
<span class="r-in"><span>  current.year <span class="op">=</span> <span class="fl">2019</span>,</span></span>
<span class="r-in"><span>  mod.names <span class="op">=</span> <span class="va">mod.names</span>, <span class="co"># List the names of the sensitivity runs</span></span></span>
<span class="r-in"><span>  likelihood.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Sensi.RE.out <span class="op">=</span> <span class="st">"Sensi_RE_out.DMP"</span>, <span class="co"># Saved file of relative errors</span></span></span>
<span class="r-in"><span>  CI <span class="op">=</span> <span class="fl">0.95</span>, <span class="co"># Confidence interval box based on the reference model</span></span></span>
<span class="r-in"><span>  TRP.in <span class="op">=</span> <span class="fl">0.4</span>, <span class="co"># Target relative abundance value</span></span></span>
<span class="r-in"><span>  LRP.in <span class="op">=</span> <span class="fl">0.25</span>, <span class="co"># Limit relative abundance value</span></span></span>
<span class="r-in"><span>  sensi_xlab <span class="op">=</span> <span class="st">"Sensitivity scenarios"</span>, <span class="co"># X-axis label</span></span></span>
<span class="r-in"><span>  ylims.in <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># Y-axis label</span></span></span>
<span class="r-in"><span>  plot.figs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># Which plots to make/save?</span></span></span>
<span class="r-in"><span>  sensi.type.breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6.5</span>, <span class="fl">9.5</span>, <span class="fl">13.5</span>, <span class="fl">16.5</span><span class="op">)</span>, <span class="co"># vertical breaks</span></span></span>
<span class="r-in"><span>  anno.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.75</span>, <span class="fl">8</span>, <span class="fl">11.5</span>, <span class="fl">15</span>, <span class="fl">18</span><span class="op">)</span>, <span class="co"># positioning of types labels</span></span></span>
<span class="r-in"><span>  anno.y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="co"># positioning of types labels</span></span></span>
<span class="r-in"><span>  anno.lab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Natural mortality"</span>, <span class="st">"VBGF/Mat."</span>, <span class="st">"Recruitment"</span>, <span class="st">"Data Wts."</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Other"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="co"># Sensitivity types labels</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ian G. Taylor, Ian J. Stewart, Allan C. Hicks, Tommy M. Garrison, Andre E. Punt, R.I.C. Chris Francis, John R. Wallace, Chantel R. Wetzel, James T. Thorson, Yukio Takeuchi, Kotaro Ono, Cole C. Monnahan, Christine C. Stawitz, Z. Teresa A’mar, Athol R. Whitten, Kelli F. Johnson, Robbie L. Emmet, Sean C. Anderson, Gwladys I. Lambert, Megan M. Stachura, Andrew B. Cooper, Andi Stephens, Neil L. Klaer, Carey R. McGilliard, Iago Mosqueira, Watal M. Iwasaki, Kathryn L. Doering, Andrea M. Havron, Nathan R. Vaughan, LaTreese S. Denson, Ashleigh J. Novak, Henning Winker, Lee Qi, Megumi Oshima, Eric Fletcher, Elizabeth F. Gugliotti, Kiva L. Oken, Arni Magnusson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>


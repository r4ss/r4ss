<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert composition data to long format — comp2long • r4ss</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert composition data to long format — comp2long"><meta name="description" content="Convert data frame containing length or generalized size composition data
from wide to long format."><meta property="og:description" content="Convert data frame containing length or generalized size composition data
from wide to long format."><meta property="og:image" content="https://r4ss.github.io/r4ss/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r4ss</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.52.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-plots.html">Example r4ss plots</a></li>
    <li><a class="dropdown-item" href="../articles/r4ss-intro-vignette.html">Introduction to r4ss</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r4ss/r4ss/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Convert composition data to long format</h1>
      <small class="dont-index">Source: <a href="https://github.com/r4ss/r4ss/blob/main/R/comp2long.R" class="external-link"><code>R/comp2long.R</code></a></small>
      <div class="d-none name"><code>comp2long.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert data frame containing length or generalized size composition data
from wide to long format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">comp2long</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="cn">NULL</span>, zero <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A data frame containing length or generalized size composition data,
or a list containing such a data frame.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>An optional string indicating the type of measurement, e.g.,
<code>"weight"</code>.</p></dd>


<dt id="arg-zero">zero<a class="anchor" aria-label="anchor" href="#arg-zero"></a></dt>
<dd><p>Whether zero frequencies should be included in the output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Data frame containing the columns</p><div class="sourceCode"><pre><code>year  month  fleet  sex  part  Nsamp  length  freq</code></pre></div><p>for length composition data, or</p><div class="sourceCode"><pre><code>method  year  month  fleet  sex  part  Nsamp  size  freq</code></pre></div><p>for generalized size composition data.</p>
<p>The second to last column can be named explicitly via the measure argument.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>x</code> is not a data frame, the function will look for data frames
called <code>x[["lencomp"]]</code> or <code>x[["dat"]][["lencomp"]]</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>In r4ss list objects, length composition data are stored as <code>lencomp</code>,
while generalized size composition data are stored as
<code>sizefreq_data_list[[i]]</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="SS_read.html">SS_read</a></code> and <code><a href="SS_readdat.html">SS_readdat</a></code> read composition data from
files into r4ss list objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Read composition data from example model</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"simple_small"</span>, package <span class="op">=</span> <span class="st">"r4ss"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="SS_read.html">SS_read</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="SS_readdat.html">SS_readdat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"data.ss"</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[[</span><span class="st">"lencomp"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Main argument can be a list or data frame</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">inputs</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year month fleet sex part Nsamp length freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2011     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2013     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2014     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2015     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016     7     1   3    0    50     26    1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year month fleet sex part Nsamp length freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2011     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2013     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2014     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2015     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016     7     1   3    0    50     26    1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year month fleet sex part Nsamp length freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2011     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2013     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2014     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2015     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016     7     1   3    0    50     26    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Rename second to last column</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">x</span>, measure <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year month fleet sex part Nsamp weight freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2011     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2013     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2014     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2015     7     1   3    0    50     26    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016     7     1   3    0    50     26    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Shrink output by omitting zero frequencies</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 800</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">comp2long</span><span class="op">(</span><span class="va">x</span>, zero <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 418</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ian G. Taylor, Ian J. Stewart, Allan C. Hicks, Tommy M. Garrison, Andre E. Punt, R.I.C. Chris Francis, John R. Wallace, Chantel R. Wetzel, James T. Thorson, Yukio Takeuchi, Kotaro Ono, Cole C. Monnahan, Christine C. Stawitz, Z. Teresa A’mar, Athol R. Whitten, Kelli F. Johnson, Robbie L. Emmet, Sean C. Anderson, Gwladys I. Lambert, Megan M. Stachura, Andrew B. Cooper, Andi Stephens, Neil L. Klaer, Carey R. McGilliard, Iago Mosqueira, Watal M. Iwasaki, Kathryn L. Doering, Andrea M. Havron, Nathan R. Vaughan, LaTreese S. Denson, Ashleigh J. Novak, Henning Winker, Lee Qi, Megumi Oshima, Eric Fletcher, Elizabeth F. Gugliotti, Kiva L. Oken.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

